@page "{fileName?}"
@model Ex11_FileReadModel
@{
    ViewData["Title"] = "Exercise 11 - File Read";
}

<div class="exercise-container">
    <h1>Exercise 11: File Read</h1>
    
    @if (Model.Files.Any())
    {
        <h3>Available Files</h3>
        @foreach (var file in Model.Files)
        {
            <div class="card mb-2">
                <div class="card-body d-flex justify-content-between align-items-center">
                    <div>
                        <h6>@file.Name</h6>
                        <small class="text-muted">@file.SizeKB KB | @file.LastModified.ToString("yyyy-MM-dd HH:mm")</small>
                    </div>
                    <div>
                        <a asp-page="/Ex11_FileRead" asp-route-fileName="@file.Name" class="btn btn-sm btn-primary">View</a>
                        <a asp-page-handler="Download" asp-route-fileName="@file.Name" class="btn btn-sm btn-outline-secondary">Download</a>
                    </div>
                </div>
            </div>
        }

        @if (!string.IsNullOrEmpty(Model.SelectedFileName))
        {
            <div class="mt-4 border p-3">
                <h4>@Model.SelectedFileName</h4>
                <pre style="white-space: pre-wrap;">@Model.FileContent</pre>
                <a asp-page="/Ex11_FileRead" class="btn btn-secondary mt-3">? Back</a>
            </div>
        }
    }
    else
    {
        <div class="alert alert-info">
            No files found. <a asp-page="/Ex10_FileWrite">Create one</a>
        </div>
    }

    @if (!string.IsNullOrEmpty(Model.ErrorMessage))
    {
        <div class="alert alert-danger">@Model.ErrorMessage</div>
    }
</div>